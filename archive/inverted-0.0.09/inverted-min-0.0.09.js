/*
 Inverted IOC container v0.0.09

 https://github.com/philmander/inverted-js

 Copyright (c) 2010, Phil Mander
 Licensed under the MIT license
*/
window.inverted={};(function(f){f.inverted=f.inverted||{};f.inverted.ioc=f.inverted.ioc||{};var h=f.inverted.Namespace={},g=f,b=".";h.root=function(b){g=b};h.delimiter=function(c){b=c};h.set=function(c){function e(b,a){var c=a.shift();c&&(b[c]===void 0&&(b[c]={}),b=e(b[c],a));return b}c=c.split(b);return e(g,c)};f.inverted.ns=h.set})(this);
(function(f){var a;f.inverted=f.inverted||{};a=f.inverted.util=f.inverted.util||{},f=a;f.isArray=function(f){if(Array.isArray)return f.isArray();return Object.prototype.toString.call(f)==="[object Array]"};f.inArray=function(f,g){if(g.indexOf)return g.indexOf(f);for(var b=0,c=g.length;b<c;b++)if(g[b]===f)return b;return-1};f.parseProtoString=function(f,g){for(var b=g,c=f.split("."),e=0,d;d=c[e];e++)if(typeof b[d]==="undefined")return null;else if(e===c.length-1&&typeof b[d]!=="function")return null;
else b=b[d];return b}})(this);
(function(f){var h=f.inverted,g=h.ns("inverted.util");g.Require=function(b){this.timeout=b||1E4;this.cache={}};g.Require.prototype.clearCache=function(){this.cache={}};g.Require.prototype.load=function(b,c,e,d){function a(a){j.push(a);j.length==l&&(f.clearTimeout(g.requireTimeout),typeof c==="function"&&c.apply(e,[!0,[],""]))}var g=this,e=e||f,d=d||"UTF-8";typeof b==="string"&&(b=[b]);for(var j=[],l=b.length,i=document.getElementsByTagName("head")[0]||document.documentElement,k=0;k<l;k++)(function(b){if(g.cache[b])a(b);
else{var c=f.document.createElement("script");c.type="text/javascript";c.src=b;c.charset=d;var e=!1;c.onload=c.onreadystatechange=function(){if(!e&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"))e=!0,a(b),g.cache[b]=!0,c.onload=c.onreadystatechange=null,i&&c.parentNode&&i.removeChild(c)};i.insertBefore(c,i.firstChild)}})(b[k]);this.requireTimeout=f.setTimeout(function(){for(var a=[],d=0;d<b.length;d++)h.util.inArray(b[d],j)===-1&&a.push(b[d]);typeof c==="function"&&(d=
a.join(", ")+" failed to load within "+g.timeout+" milis",c.apply(e,[!1,a,d]))},this.timeout)}})(this);(function(f){f.inverted.ns("inverted.resolvers").defaultSrcResolver=function(f,g){var b=f.replace(/\./g,"/"),g=g.replace(/\/$/,"");return g+"/"+b+".js"}})(this);
(function(f){var h=f.inverted,g=h.ns("inverted.ioc");g.ProtoFactory=function(b){b.ctx=b.ctx||f;this.config=b};g.ProtoFactory.prototype.getProto=function(b){var b=this.getProtoConfig(b),c=null;if(!b.scope||b.scope!="singleton"||b.scope=="singleton"&&!b.instance){if(c=this._createInstance(b.proto,b.args,b.props,b.extendsRef),b.scope&&b.scope=="singleton")b.instance=c}else c=b.instance;return c};g.ProtoFactory.prototype._createInstance=function(b,c,e,d){var a=null;typeof b==="string"&&(b=this.parseProtoString(b));
a=this._createArgs(c);d&&this._extendProto(b,this.getProto(d));switch(a.length){case 0:a=new b;break;case 1:a=new b(a[0]);break;case 2:a=new b(a[0],a[1]);break;case 3:a=new b(a[0],a[1],a[2]);break;case 4:a=new b(a[0],a[1],a[2],a[3]);break;case 5:a=new b(a[0],a[1],a[2],a[3],a[4]);break;case 6:a=new b(a[0],a[1],a[2],a[3],a[4],a[5]);break;case 7:a=new b(a[0],a[1],a[2],a[3],a[4],a[5],a[6]);break;case 8:a=new b(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]);break;case 9:a=new b(a[0],a[1],a[2],a[3],a[4],a[5],
a[6],a[7],a[8]);break;case 10:a=new b(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9]);break;default:throw Error("Instances have 10 arg limit");}if(e)for(var f in e)e.hasOwnProperty(f)&&(b=this._createArgs([e[f]]),typeof a[f]=="function"?a[f].apply(a,b[0]):a[f]=b[0]);return a};g.ProtoFactory.prototype._getProtoFromFactory=function(b,c){var e=this.getProto(b);if(c)return e[c].apply(e);else throw Error("No factory method defined with "+b);};g.ProtoFactory.prototype._createArgs=function(b){var c=[];
if(b)for(var e=0;e<b.length;e++){var d=b[e];if(d===null||typeof d==="undefined")c[e]=d;else{var a=typeof d=="object";if(a&&d.ref||typeof d==="string"&&d.match(/^\*[^\*]/)!==null)c[e]=this.getProto(d.ref||d.substr(1));else if(a&&d.factoryRef)c[e]=this._getProtoFromFactory(d.factoryRef,d.factoryMethod);else if(a&&d.proto)c[e]=this._createInstance(d.proto,d.args,d.props);else if(a)for(var f in c[e]={},d)d.hasOwnProperty(f)&&(a=d[f],c[e][f]=a&&(a.ref||typeof a==="string"&&a.match(/^\*[^\*]/)!==null)?
this.getProto(a.ref||a.substr(1)):a&&a.factoryRef?this._getProtoFromFactory(a.factoryRef,a.factoryMethod):a&&a.proto?this._createInstance(a.proto,a.args,a.props):a);else c[e]=d}}return c};g.ProtoFactory.prototype._extendProto=function(b,c){var e={},d;for(d in b.prototype)e[d]=b.prototype[d];b.prototype=c;b.prototype._super=c.constructor;for(var a in e)b.prototype[a]=e[a];b.prototype.constructor=b};g.ProtoFactory.prototype.parseProtoString=function(b){return h.util.parseProtoString(b,this.config.ctx)};
g.ProtoFactory.prototype.getProtoConfig=function(b){var c=this.config;if(this.config.hasOwnProperty(b))return c[b];else throw Error("No proto is defined for "+b);}})(this);
(function(f){var h=f.inverted,g=h.ns("inverted.ioc");g.AppContext=function(b,c,e,d,a){if(!(this instanceof g.AppContext))return b.ctx=e,d=new h.ioc.ProtoFactory(b.protos),a=new h.util.Require(5E3),new g.AppContext(b,c,null,d,a);this.config=b;this.profile=c||"local";this.protoFactory=d;this.require=a;this.srcResolver=typeof b.srcResolver=="function"?b.srcResolver:typeof b.srcResolver=="object"?b.srcResolver[this.profile]:h.resolvers.defaultSrcResolver;b.srcBase=b.srcBase||"";this.srcBase=typeof b.srcBase==
"object"?b.srcBase[this.profile]:b.srcBase};f.AppContext=g.AppContext;g.AppContext.prototype.getProto=function(){var b=Array.prototype.slice.call(arguments,0),c;b.length>1&&typeof b[b.length-1]=="function"&&(c=b.pop());for(var e=[],d=0;d<b.length;d++)e=e.concat(this._getDependencies(b[d]));for(var d=[],a=0;a<e.length;a++)if(this.protoFactory.parseProtoString(e[a])){var g=this.srcResolver(e[a],this.srcBase);h.util.inArray(g,d)==-1&&d.push(g)}this.require.load(d,function(a,d,e){if(a){a=[];for(d=0;d<
b.length;d++)a.push(this.protoFactory.getProto(b[d]));c&&c.apply(f,a)}else throw Error(e);},this)};g.AppContext.prototype._getDependencies=function(b,c){var c=c||[],e=this.protoFactory.getProtoConfig(b);c.push(e.proto);e.extendsRef&&(c=this._getDependencies(e.extendsRef,c));e.args&&(c=this._getDependenciesFromArgs(e.args,c));if(e.props)for(var d in e.props)e.props.hasOwnProperty(d)&&(c=this._getDependenciesFromArgs([e.props[d]],c));return c};g.AppContext.prototype._getDependenciesFromArgs=function(b,
c){if(b)for(var e=0;e<b.length;e++){var d=b[e];if(!(d===null||typeof d==="undefined")){var a=typeof d=="object";if(a&&d.ref||typeof d==="string"&&d.match(/^\*[^\*]/)!==null)c=this._getDependencies(d.ref||d.substr(1),c);else if(a&&d.factoryRef)c=this._getDependencies(d.factoryRef,c);else if(a&&d.proto)c.push(d.proto);else if(a)for(var f in d)d.hasOwnProperty(f)&&((a=d[f])&&(a.ref||typeof a==="string"&&a.match(/^\*[^\*]/)!==null)?c=this._getDependencies(a.ref||a.substr(1),c):a&&a.factoryRef?c=this._getDependencies(a.factoryRef,
c):a&&a.proto&&c.push(a.proto))}}return c}})(this);