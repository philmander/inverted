/*
 Inverted IOC container v0.0.05

 https://github.com/philmander/inverted-js

 Copyright (c) 2010, Phil Mander
 Licensed under the MIT license
*/
window.inverted={};(function(g){g.inverted=g.inverted||{};g.inverted.ioc=g.inverted.ioc||{};var h=g.inverted.Namespace={},f=g,b=".";h.root=function(b){f=b};h.delimiter=function(c){b=c};h.set=function(c){function e(b,a){var c=a.shift();c&&(b[c]===void 0&&(b[c]={}),b=e(b[c],a));return b}c=c.split(b);return e(f,c)};g.inverted.ns=h.set})(window);
(function(g){var a;g.inverted=g.inverted||{};a=g.inverted.util=g.inverted.util||{},g=a;g.isArray=function(g){if(Array.isArray)return g.isArray();return Object.prototype.toString.call(g)==="[object Array]"};g.inArray=function(g,f){if(f.indexOf)return f.indexOf(g);for(var b=0,c=f.length;b<c;b++)if(f[b]===g)return b;return-1}})(window);
(function(g,h){var f=h.ns("inverted.util"),b=0;f.Require=function(b){this.timeout=b||1E4;this.cache={}};f.Require.prototype.clearCache=function(){this.cache={}};f.Require.prototype.load=function(c,e,d,a){function f(a){k.push(a);k.length==m&&(g.clearTimeout(i.requireTimeout),typeof e==="function"&&e.apply(d,[!0,[],""]))}var i=this;b++;d=d||g;a=a||"UTF-8";typeof c==="string"&&(c=[c]);for(var k=[],m=c.length,j=document.getElementsByTagName("head")[0]||document.documentElement,l=0;l<m;l++)(function(b){if(i.cache[b])f(b);
else{var c=g.document.createElement("script");c.type="text/javascript";c.src=b;c.charset=a;var d=!1;c.onload=c.onreadystatechange=function(){if(!d&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"))d=!0,f(b),i.cache[b]=!0,c.onload=c.onreadystatechange=null,j&&c.parentNode&&j.removeChild(c)};j.insertBefore(c,j.firstChild)}})(c[l]);this.requireTimeout=g.setTimeout(function(){for(var a=[],b=0;b<c.length;b++)h.util.inArray(c[b],k)===-1&&a.push(c[b]);typeof e==="function"&&(b=
a.join(", ")+" failed to load within "+i.timeout+" milis",e.apply(d,[!1,a,b]))},this.timeout)}})(window,window.inverted);(function(g,h){h.ns("inverted.resolvers").defaultSrcResolver=function(f,b){var c=f.replace(/\./g,"/"),b=b.replace(/\/$/,"");return b+"/"+c+".js"}})(window,window.inverted);
(function(g,h){var f=h.ns("inverted.ioc");f.ProtoFactory=function(b){this.config=b};f.ProtoFactory.prototype.getProto=function(b){var b=this.getProtoConfig(b),c=null;if(!b.scope||b.scope!="singleton"||b.scope=="singleton"&&!b.instance){if(c=this._createInstance(b.proto,b.args,b.props,b.extendsRef),b.scope&&b.scope=="singleton")b.instance=c}else c=b.instance;return c};f.ProtoFactory.prototype._createInstance=function(b,c,e,d){var a=null;typeof b==="string"&&(b=window.eval(b));a=this._createArgs(c);
d&&this._extendProto(b,this.getProto(d));switch(a.length){case 0:a=new b;break;case 1:a=new b(a[0]);break;case 2:a=new b(a[0],a[1]);break;case 3:a=new b(a[0],a[1],a[2]);break;case 4:a=new b(a[0],a[1],a[2],a[3]);break;case 5:a=new b(a[0],a[1],a[2],a[3],a[4]);break;case 6:a=new b(a[0],a[1],a[2],a[3],a[4],a[5]);break;case 7:a=new b(a[0],a[1],a[2],a[3],a[4],a[5],a[6]);break;case 8:a=new b(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]);break;case 9:a=new b(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]);break;
case 9:a=new b(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9]);break;default:throw Error("Instances have 10 arg limit");}if(e)for(var f in e)e.hasOwnProperty(f)&&(b=this._createArgs([e[f]]),typeof a[f]=="function"?a[f].apply(a,b[0]):a[f]=b[0]);return a};f.ProtoFactory.prototype._getProtoFromFactory=function(b,c){var e=this.getProto(b);if(c)return e[c].apply(e);else throw Error("No factory method defined with "+b);};f.ProtoFactory.prototype._createArgs=function(b){var c=[];if(b)for(var e=0;e<b.length;e++){var d=
b[e];if(d===null||typeof d==="undefined")c[e]=d;else{var a=typeof d=="object";if(a&&d.ref||typeof d==="string"&&d.match(/^\*[^\*]/)!==null)c[e]=this.getProto(d.ref||d.substr(1));else if(a&&d.factoryRef)c[e]=this._getProtoFromFactory(d.factoryRef,d.factoryMethod);else if(a&&d.proto)c[e]=this._createInstance(d.proto,d.args,d.props);else if(a)for(var f in c[e]={},d)d.hasOwnProperty(f)&&(a=d[f],c[e][f]=a&&(a.ref||typeof a==="string"&&a.match(/^\*[^\*]/)!==null)?this.getProto(a.ref||a.substr(1)):a&&a.factoryRef?
this._getProtoFromFactory(a.factoryRef,a.factoryMethod):a&&a.proto?this._createInstance(a.proto,a.args,a.props):a);else c[e]=d}}return c};f.ProtoFactory.prototype._extendProto=function(b,c){var e={},d;for(d in b.prototype)e[d]=b.prototype[d];b.prototype=c;b.prototype._super=c.constructor;for(d in e)b.prototype[d]=e[d];b.prototype.constructor=b};f.ProtoFactory.prototype.getProtoConfig=function(b){var c=this.config;if(this.config.hasOwnProperty(b))return c[b];else throw Error("No proto is defined for "+
b);}})(window,window.inverted);
(function(g,h){var f=h.ns("inverted.ioc");f.AppContext=function(b,c,e,d){if(!(this instanceof f.AppContext))return e=new h.ioc.ProtoFactory(b.protos),d=new h.util.Require(1E4),new f.AppContext(b,c,e,d);this.config=b;this.profile=c||"local";this.protoFactory=e;this.require=d;this.srcResolver=typeof b.srcResolver=="function"?b.srcResolver:typeof b.srcResolver=="object"?b.srcResolver[this.profile]:h.resolvers.defaultSrcResolver;b.srcBase=b.srcBase||"";this.srcBase=typeof b.srcBase=="object"?b.srcBase[this.profile]:
b.srcBase};g.AppContext=f.AppContext;f.AppContext.prototype.getProto=function(){var b=Array.prototype.slice.call(arguments,0),c;b.length>1&&typeof b[b.length-1]=="function"&&(c=b.pop());for(var e=[],d=0;d<b.length;d++)e=e.concat(this._getDependencies(b[d]));for(var a=[],d=0;d<e.length;d++){var f=this.srcResolver(e[d],this.srcBase);h.util.inArray(f,a)==-1&&a.push(f)}(new h.util.Require(1E4)).load(a,function(a,d,e){if(a){a=[];for(d=0;d<b.length;d++)a.push(this.protoFactory.getProto(b[d]));c&&c.apply(g,
a)}else throw Error(e);},this)};f.AppContext.prototype._getDependencies=function(b,c){var c=c||[],e=this.protoFactory.getProtoConfig(b);c.push(e.proto);e.extendsRef&&(c=this._getDependencies(e.extendsRef,c));e.args&&(c=this._getDependenciesFromArgs(e.args,c));if(e.props)for(var d in e.props)e.props.hasOwnProperty(d)&&(c=this._getDependenciesFromArgs([e.props[d]],c));return c};f.AppContext.prototype._getDependenciesFromArgs=function(b,c){if(b)for(var e=0;e<b.length;e++){var d=b[e];if(!(d===null||typeof d===
"undefined")){var a=typeof d=="object";if(a&&d.ref||typeof d==="string"&&d.match(/^\*[^\*]/)!==null)c=this._getDependencies(d.ref||d.substr(1),c);else if(a&&d.factoryRef)c=this._getDependencies(d.factoryRef,c);else if(a&&d.proto)c.push(d.proto);else if(a)for(var f in d)d.hasOwnProperty(f)&&((a=d[f])&&(a.ref||typeof a==="string"&&a.match(/^\*[^\*]/)!==null)?c=this._getDependencies(a.ref||a.substr(1),c):a&&a.factoryRef?c=this._getDependencies(a.factoryRef,c):a&&a.proto&&c.push(a.proto))}}return c}})(window,
window.inverted);